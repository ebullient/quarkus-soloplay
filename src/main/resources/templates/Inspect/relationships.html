<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campaign Relationships - {storyThreadId}</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/inspector.css">
</head>
<body>
    <header>
        <h1>Campaign Relationships</h1>
        <p>Campaign: {storyThreadId}</p>
    </header>

    <nav>
        <a href="/chat">Chat Interface</a>
        <a href="/lore">Lore Questions</a>
        <a href="/ingest">Ingest Documents</a>
        <a href="/inspect" class="active">My Game</a>
    </nav>

    <main>
        <div class="breadcrumb">
            <a href="/inspect?storyThreadId={storyThreadId}">Inspect</a> &gt;
            <span>Relationships</span>
        </div>

        <h2>Relationship Network</h2>

        <div class="actions">
            <a href="/inspect/ai/api-network?storyThreadId={storyThreadId}" class="btn btn-ai">View AI Output</a>
        </div>

        {#if relationships.isEmpty()}
            <div class="empty-state">
                <p>No relationships found in this campaign.</p>
            </div>
        {#else}
            <div class="relationship-network">
                {#for relationship in relationships}
                    <div class="relationship-card">
                        <div class="relationship-connection">
                            <div class="character from">
                                <strong>{relationship.character1.name}</strong>
                                {#if relationship.character1.tags}
                                <span class="character-tags">({#each relationship.character1.tags}{it}{#if it_hasNext}, {/if}{/each})</span>
                                {/if}
                            </div>
                            <div class="relationship-details">
                                {#if relationship.tags}
                                <span class="relationship-type">{#each relationship.tags}{it}{#if it_hasNext}, {/if}{/each}</span>
                                {/if}
                                <div class="relationship-strength">
                                    Strength: {relationship.strength}
                                </div>
                                {#if relationship.description}
                                    <p class="relationship-description">{relationship.description}</p>
                                {/if}
                            </div>
                            <div class="character to">
                                <strong>{relationship.character2.name}</strong>
                                {#if relationship.character2.tags}
                                <span class="character-tags">({#each relationship.character2.tags}{it}{#if it_hasNext}, {/if}{/each})</span>
                                {/if}
                            </div>
                        </div>
                        <div class="relationship-meta">
                            Since: {relationship.since}
                        </div>
                    </div>
                {/for}
            </div>
        {/if}
    </main>
</body>
</html>
